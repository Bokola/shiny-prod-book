# Alternatives to Shiny

## Plumber

_Could our student "scoring" be hosted outside of the Shiny app?_

![Plumber Scoring](imgs/shiny-alt/plumber-alt.png)

### Intro to Plumber

**Resources:**

Plumber is an R package that converts your existing R code to a web API using a handful of special one-line comments.

> What are Web APIs? For some, APIs (Application Programming Interface) are things heard of but seldom seen. However, whether seen or unseen, APIs are part of everyday digital life. In fact, you’ve likely used a web API from within R, even if you didn’t recognize it at the time! Several R packages are simply wrappers around popular web APIs, such as `tidycensus` and `gh`. Web APIs are a framework for sharing information across a network, most commonly through HTTP.

You can install the latest stable version from CRAN using the following command:

```
install.packages("plumber")
```

These comments allow plumber to make your R functions available as API endpoints. You can either prefix the comments with `#*` or `#'` but we recommend the former since `#'` will conflict with the Roxygen package.

Basic example:

1. Create a File: `plumber.R`

```
# plumber.R

#* Echo back the input
#* @param msg The message to echo
#* @get /echo
function(msg=""){
  list(msg = paste0("The message is: '", msg, "'"))
}

#* Plot a histogram
#* @png
#* @get /plot
function(){
  rand <- rnorm(100)
  hist(rand)
}

#* Return the sum of two numbers
#* @param a The first number to add
#* @param b The second number to add
#* @post /sum
function(a, b){
  as.numeric(a) + as.numeric(b)
}
```

2. Serve the `plumber.R` file from the R console:

```
library(plumber)
r <- plumb("plumber.R")  # Where 'plumber.R' is the location of the file shown above
r$run(port=8000)
```

You can visit this URL using a browser or a terminal to run your R function and get the results. For instance http://localhost:8000/plot will show you a histogram, and http://localhost:8000/echo?msg=hello will echo back the ‘hello’ message you provided.

3. Hit the endpoints (example: use `curl` from mac/linux terminal)

```
$ curl "http://localhost:8000/echo"
 {"msg":["The message is: ''"]}
 
$ curl "http://localhost:8000/echo?msg=hello"
 {"msg":["The message is: 'hello'"]}
 
$ curl --data "a=4&b=3" "http://localhost:8000/sum"
 [7]
```

#### References and Resources

- [Reference: Plumber Docs](https://www.rplumber.io/)
- [Plumber Integration in RStudio 1.2](https://blog.rstudio.com/2018/10/23/rstudio-1-2-preview-plumber-integration/)
- [RViews Blog: REST APIs and Plumber by James Blair](https://rviews.rstudio.com/2018/07/23/rest-apis-and-plumber/)
- [Video: Turning your R code into an API by Jeff Allen](https://www.rstudio.com/resources/videos/plumber-turning-your-r-code-into-an-api/)
- [Webinar: Plumbing APIs with Plumber by Jeff Allen](https://www.rstudio.com/resources/videos/plumbing-apis-with-plumber/)

## R Markdown

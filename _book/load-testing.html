<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Supplement to Shiny in Production</title>
  <meta name="description" content="This document is full of supplemental resources and content from the Shiny in Production Workshop delievered at rstudio::conf 2019.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Supplement to Shiny in Production" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This document is full of supplemental resources and content from the Shiny in Production Workshop delievered at rstudio::conf 2019." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Supplement to Shiny in Production" />
  
  <meta name="twitter:description" content="This document is full of supplemental resources and content from the Shiny in Production Workshop delievered at rstudio::conf 2019." />
  



<meta name="date" content="2019-01-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="connecting-to-data-in-production.html">
<link rel="next" href="plot-caching.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Shiny in Production Workshop @ RStudio Conf 2019</a></li>
<li class="chapter" data-level="2" data-path="course-intro.html"><a href="course-intro.html"><i class="fa fa-check"></i><b>2</b> Introduction to Shiny in Production</a><ul>
<li class="chapter" data-level="2.1" data-path="course-intro.html"><a href="course-intro.html#workshop-objectives"><i class="fa fa-check"></i><b>2.1</b> Workshop Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="course-intro.html"><a href="course-intro.html#workshop-infrastructure"><i class="fa fa-check"></i><b>2.2</b> Workshop Infrastructure</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="app-intro.html"><a href="app-intro.html"><i class="fa fa-check"></i><b>3</b> Introduction to the Application</a><ul>
<li class="chapter" data-level="3.1" data-path="app-intro.html"><a href="app-intro.html#activity-explore-the-application"><i class="fa fa-check"></i><b>3.1</b> Activity: Explore the Application</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="application-testing-shinytest.html"><a href="application-testing-shinytest.html"><i class="fa fa-check"></i><b>4</b> Application Testing: <code>shinytest</code></a></li>
<li class="chapter" data-level="5" data-path="profiling-the-most-important-thing.html"><a href="profiling-the-most-important-thing.html"><i class="fa fa-check"></i><b>5</b> Profiling: “The most important thing”</a></li>
<li class="chapter" data-level="6" data-path="deployment.html"><a href="deployment.html"><i class="fa fa-check"></i><b>6</b> Deployment</a><ul>
<li class="chapter" data-level="6.1" data-path="deployment.html"><a href="deployment.html#rstudio-connect"><i class="fa fa-check"></i><b>6.1</b> RStudio Connect</a></li>
<li class="chapter" data-level="6.2" data-path="deployment.html"><a href="deployment.html#packrat"><i class="fa fa-check"></i><b>6.2</b> Packrat</a></li>
<li class="chapter" data-level="6.3" data-path="deployment.html"><a href="deployment.html#extended-topics-and-resources"><i class="fa fa-check"></i><b>6.3</b> Extended Topics and Resources</a><ul>
<li class="chapter" data-level="6.3.1" data-path="deployment.html"><a href="deployment.html#programmatic-deployment"><i class="fa fa-check"></i><b>6.3.1</b> Programmatic Deployment</a></li>
<li class="chapter" data-level="6.3.2" data-path="deployment.html"><a href="deployment.html#collaborative-publishing"><i class="fa fa-check"></i><b>6.3.2</b> Collaborative Publishing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="connecting-to-data-in-production.html"><a href="connecting-to-data-in-production.html"><i class="fa fa-check"></i><b>7</b> Connecting to Data in Production</a></li>
<li class="chapter" data-level="8" data-path="load-testing.html"><a href="load-testing.html"><i class="fa fa-check"></i><b>8</b> Load Testing</a></li>
<li class="chapter" data-level="9" data-path="plot-caching.html"><a href="plot-caching.html"><i class="fa fa-check"></i><b>9</b> Plot Caching</a><ul>
<li class="chapter" data-level="9.1" data-path="plot-caching.html"><a href="plot-caching.html#shiny-plot-caching-overview"><i class="fa fa-check"></i><b>9.1</b> Shiny Plot Caching Overview</a><ul>
<li class="chapter" data-level="9.1.1" data-path="plot-caching.html"><a href="plot-caching.html#when-to-use-plot-caching"><i class="fa fa-check"></i><b>9.1.1</b> When to use plot caching</a></li>
<li class="chapter" data-level="9.1.2" data-path="plot-caching.html"><a href="plot-caching.html#using-rendercachedplot"><i class="fa fa-check"></i><b>9.1.2</b> Using <code>renderCachedPlot</code></a></li>
<li class="chapter" data-level="9.1.3" data-path="plot-caching.html"><a href="plot-caching.html#workshop-exercise-plot-cache-benchmarking"><i class="fa fa-check"></i><b>9.1.3</b> Workshop Exercise: Plot cache benchmarking</a></li>
<li class="chapter" data-level="9.1.4" data-path="plot-caching.html"><a href="plot-caching.html#extended-topics-and-resources-1"><i class="fa fa-check"></i><b>9.1.4</b> Extended Topics and Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="scaling.html"><a href="scaling.html"><i class="fa fa-check"></i><b>10</b> Scaling</a><ul>
<li class="chapter" data-level="10.1" data-path="scaling.html"><a href="scaling.html#application-scaling-101"><i class="fa fa-check"></i><b>10.1</b> Application Scaling 101</a></li>
<li class="chapter" data-level="10.2" data-path="scaling.html"><a href="scaling.html#rstudio-connect-performance-settings"><i class="fa fa-check"></i><b>10.2</b> RStudio Connect Performance Settings</a><ul>
<li class="chapter" data-level="10.2.1" data-path="scaling.html"><a href="scaling.html#content-scheduler"><i class="fa fa-check"></i><b>10.2.1</b> Content Scheduler</a></li>
<li class="chapter" data-level="10.2.2" data-path="scaling.html"><a href="scaling.html#scheduling-parameters"><i class="fa fa-check"></i><b>10.2.2</b> Scheduling Parameters</a></li>
<li class="chapter" data-level="10.2.3" data-path="scaling.html"><a href="scaling.html#high-availability-and-horizontal-scaling"><i class="fa fa-check"></i><b>10.2.3</b> High Availability and Horizontal Scaling</a></li>
<li class="chapter" data-level="10.2.4" data-path="scaling.html"><a href="scaling.html#r-markdown-documents-with-runtimeshiny"><i class="fa fa-check"></i><b>10.2.4</b> R Markdown Documents with runtime::shiny</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="devops-philosophy-tooling.html"><a href="devops-philosophy-tooling.html"><i class="fa fa-check"></i><b>11</b> DevOps Philosophy &amp; Tooling</a></li>
<li class="chapter" data-level="12" data-path="production-case-studies.html"><a href="production-case-studies.html"><i class="fa fa-check"></i><b>12</b> Production Case Studies</a></li>
<li class="chapter" data-level="13" data-path="alternatives-to-shiny.html"><a href="alternatives-to-shiny.html"><i class="fa fa-check"></i><b>13</b> Alternatives to Shiny</a><ul>
<li class="chapter" data-level="13.1" data-path="alternatives-to-shiny.html"><a href="alternatives-to-shiny.html#plumber"><i class="fa fa-check"></i><b>13.1</b> Plumber</a><ul>
<li class="chapter" data-level="13.1.1" data-path="alternatives-to-shiny.html"><a href="alternatives-to-shiny.html#intro-to-plumber"><i class="fa fa-check"></i><b>13.1.1</b> Intro to Plumber</a></li>
<li class="chapter" data-level="13.1.2" data-path="alternatives-to-shiny.html"><a href="alternatives-to-shiny.html#workshop-exercise-plumber"><i class="fa fa-check"></i><b>13.1.2</b> Workshop Exercise: Plumber</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="alternatives-to-shiny.html"><a href="alternatives-to-shiny.html#r-markdown"><i class="fa fa-check"></i><b>13.2</b> R Markdown</a><ul>
<li class="chapter" data-level="13.2.1" data-path="alternatives-to-shiny.html"><a href="alternatives-to-shiny.html#workshop-exercise-r-markdown"><i class="fa fa-check"></i><b>13.2.1</b> Workshop Exercise: R Markdown</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="shiny-async.html"><a href="shiny-async.html"><i class="fa fa-check"></i><b>14</b> Shiny Async</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Supplement to Shiny in Production</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="load-testing" class="section level1">
<h1><span class="header-section-number">Chapter 8</span> Load Testing</h1>
<p>Load testing helps developers and administrators estimate how many users their application can support. If an application requires tuning, load testing and load test result analysis can be used to identify performance bottlenecks and to guide changes to infrastructure, configuration, or code.</p>
<p>It’s a common misconception that <em>“Shiny doesn’t scale”</em>. In actuality, properly-architected Shiny applications can be scaled horizontally, a fact which Sean Lopp was recently able to demonstrate at rstudio::conf 2018. We used <code>shinycannon</code> to simulate 10,000 concurrent users interacting with an application deployed to AWS. You can see a recording of Sean’s talk and the load test demonstration here: <a href="https://www.rstudio.com/resources/videos/scaling-shiny/">Scaling Shiny</a></p>
<p>To perform a load test you’ll need two pieces of software: <code>shinyloadtest</code> and <code>shinycannon</code>.</p>
<ul>
<li><code>shinyloadtest</code> is an R package used to generate recordings and analyze results. You should install it on your development machine. <a href="https://github.com/rstudio/shinyloadtest">GitHub</a></li>
<li><code>shinycannon</code> is the command-line replay tool. You can install it on your development machine for testing, but for best results we recommend installing it on a server, and preferably not the one the application under test is also on. <a href="https://github.com/rstudio/shinycannon">GitHub</a></li>
</ul>
<p>See the Load Testing Quickstart <a href="https://rstudio.github.io/shinyloadtest/#quick-start">Here</a>.</p>
<div id="optimization-loop-methodology" class="section level4">
<h4><span class="header-section-number">8.0.0.1</span> Optimization Loop Methodology</h4>
<ul>
<li><strong>Benchmark:</strong> Use <code>shinyloadtest::record_session()</code> to record interaction, <code>shinycannon</code> to simulate users</li>
<li><strong>Analyze:</strong> Visualize and interpret the metrics</li>
<li><strong>Recommend:</strong> Propose ways for the capacity of the application to be increased</li>
<li><strong>Optimize:</strong> Implement recommendations and benchmark again. Repeat until satisfied</li>
</ul>
<p><em>Workflow:</em></p>
<div class="figure">
<img src="imgs/loadtesting/loadtest-workflow.png" alt="Load Test Workflow" />
<p class="caption">Load Test Workflow</p>
</div>
<ul>
<li>Use `shinyloadtest to record a session with a Shiny app</li>
<li>Generate load with <code>shinycannon</code></li>
<li>Analyze metrics with <code>shinyloadtest</code></li>
<li>Make changes to the Shiny application</li>
<li>Generate load and analyze again</li>
</ul>
<div class="figure">
<img src="imgs/loadtesting/loadtest-steps.png" alt="Load Test Steps" />
<p class="caption">Load Test Steps</p>
</div>
<p><a href="https://rstudio.github.io/shinyloadtest/index.html">Load Testing Shiny Applications</a></p>
</div>
<div id="workshop-exercise-load-testing" class="section level4">
<h4><span class="header-section-number">8.0.0.2</span> Workshop Exercise: Load Testing</h4>
<p><strong>First: Open runloadtest.R,do the pre-run checklist</strong></p>
<p><strong>Discussion:</strong></p>
<p><em>Preparing for the load test</em></p>
<ul>
<li>First, what is up with the pre-run checklist? Any idea why these steps are (currently) necessary?</li>
<li>The <code>runloadtest.R</code> file is going to start with a baseline test of 1 and then a test of 25. Why is the baseline important?</li>
</ul>
<p><strong>Deliverable: Run the load test</strong></p>
<ul>
<li>Follow the first set of commands in <code>runloadtest.R</code></li>
<li>How did the experience for 1 user compare to the experience for 25 users?</li>
</ul>
</div>
<div id="references-and-resources-1" class="section level4">
<h4><span class="header-section-number">8.0.0.3</span> References and Resources</h4>
<p><strong>Webinar:</strong></p>
<ul>
<li><a href="https://resources.rstudio.com/webinars/load-testing-shiny-alan-dipert">Load testing Shiny by Alan Dipert</a></li>
<li><a href="https://github.com/rstudio/webinars/blob/master/63-shinyloadtest/slides.pdf">Webinar Slides</a></li>
</ul>
<p><strong>Vignettes:</strong></p>
<ul>
<li><a href="https://rstudio.github.io/shinyloadtest/articles/analyzing-load-test-logs.html">Analyzing Load Test Logs</a></li>
<li><a href="https://rstudio.github.io/shinyloadtest/articles/case-study-scaling.html">Case Study: Scaling an Application</a></li>
<li><a href="https://rstudio.github.io/shinyloadtest/articles/limitations-of-shinyloadtest.html">Limitations of <code>shinyloadtest</code></a></li>
<li><a href="https://rstudio.github.io/shinyloadtest/articles/load-testing-authenticated-apps.html">Load Testing Authenticated Apps</a></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="connecting-to-data-in-production.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="plot-caching.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["spc-supplement.pdf", "spc-supplement.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
